define(["jquery","routing","ekyna-verified-reviews/templates"],function(n,e,l){"use strict";var o,s,d,a,i,f=n("#verified-reviews");function r(){i||(a.prop("disabled",!0).find("> i").removeClass("fa-comments-o").addClass("fa-spinner fa-pulse fa-fw"),(i=n.getJSON(e.generate("ekyna_verified_reviews_api_reviews",{productId:o.id,page:d}))).success(function(e){var i;0<e.length?((i=n(l["reviews.html.twig"].render({config:o,reviews:e}))).appendTo(s).slideDown(),n([document.documentElement,document.body]).animate({scrollTop:i.offset().top+180},1e3),e.length===o.columns*o.rows?(d++,a.prop("disabled",!1)):t()):t()}),i.always(function(){i=void 0,a.find("> i").removeClass("fa-spinner fa-pulse fa-3x fa-fw").addClass("fa-comments-o")}))}function t(){a.prop("disabled",!0).hide().off("click",r)}1===f.length&&(o=f.data("config"),s=f.find("> .verified-reviews-body"),(d=1)===s.length&&(a=f.find("> .verified-reviews-footer > button").prop("disabled",!1).on("click",r)))});