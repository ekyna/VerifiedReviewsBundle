define(["jquery","routing","ekyna-verified-reviews/templates"],function(a,b,c){"use strict";function d(){i||(h.prop("disabled",!0).find("> i").removeClass("fa-comments-o").addClass("fa-spinner fa-pulse fa-fw"),i=a.getJSON(b.generate("ekyna_verified_reviews_api_reviews",{productId:j.id,page:l})),i.success(function(b){if(0<b.length){var d=a(c["reviews.html.twig"].render({config:j,reviews:b}));d.appendTo(k).slideDown(),a([document.documentElement,document.body]).animate({scrollTop:d.offset().top+180},1e3),b.length===j.columns*j.rows?(l++,h.prop("disabled",!1)):e()}else e()}),i.always(function(){i=void 0,h.find("> i").removeClass("fa-spinner fa-pulse fa-3x fa-fw").addClass("fa-comments-o")}))}function e(){h.prop("disabled",!0).hide().off("click",d)}function f(){h=g.find("> .verified-reviews-footer > button").prop("disabled",!1).on("click",d)}var g=a("#verified-reviews");if(1===g.length){var h,i,j=g.data("config"),k=g.find("> .verified-reviews-body"),l=1;1===k.length&&f()}});